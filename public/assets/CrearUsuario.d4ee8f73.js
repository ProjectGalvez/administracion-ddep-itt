import{_ as D}from"./BreadcrumbNav.15d15e07.js";import{u as N}from"./useCrearRecurso.c98ef555.js";import{Q as M,a as S}from"./QCard.cb508ff7.js";import{Q as j,a as z}from"./QForm.f7dbdbf9.js";import{Q as b}from"./QInput.fb482f67.js";import{Q as G}from"./QSelect.e7df04d7.js";import{v as k,aM as V,r as h,c as O,q as p,z as w,t as s,d as l,A as a,B as u,aa as F,u as v,s as C,ar as P,F as $,ab as A,ao as y,ac as x,Q as T}from"./index.6aee2e30.js";import{Q as H}from"./QFile.8e16de15.js";import{Q as J}from"./QImg.7c114304.js";import{g as K}from"./errorUtils.9be85d5d.js";import"./documentosApi.f9b655d1.js";import"./axios.a596eead.js";import"./useQueryClient.esm.ef5065e6.js";import"./utils.esm.df383359.js";import"./useMutation.esm.2b00b620.js";import"./mutation.esm.5dbe1dbb.js";import"./use-dark.6d3765c8.js";import"./focus-manager.05708ea9.js";import"./use-key-composition.138705f4.js";import"./uid.42677368.js";import"./use-form.7a2b9d0c.js";import"./QChip.ec11ad7b.js";import"./QItem.7d9afe8e.js";import"./QItemLabel.7e1a4be7.js";import"./QMenu.7408e287.js";import"./position-engine.9bef8d76.js";import"./selection.76539ba5.js";import"./focusout.012d42f6.js";import"./QDialog.84ddac0d.js";import"./use-prevent-scroll.46e9c667.js";import"./format.2bc25e5f.js";const W=()=>N("/users","listar-usuario"),X=a("div",{class:"fontsize-15 text-weight-light"},"Introduce los datos",-1),Y={class:"row q-col-gutter-md"},Z={class:"col-12"},ee={class:"col-xs-12 col-sm-4"},oe=a("span",{class:"required-star"},"*",-1),re={class:"col-xs-12 col-sm-4"},ae=a("span",{class:"required-star"},"*",-1),le={class:"col-xs-12 col-sm-4"},se=a("span",{class:"required-star"},"*",-1),te={class:"col-xs-12 col-sm-4"},ne=a("span",{class:"required-star"},"*",-1),ie={class:"col-xs-12 col-sm-4"},ue={class:"col-xs-12 col-sm-7"},me=k({__name:"FormUser",props:{user:{},loading:{type:Boolean},errorServer:{}},emits:["guardar"],setup(Q,{emit:_}){const m=Q,o=V(m,"user"),g=V(m,"loading"),d=V(m,"errorServer"),f=d.value;let i=h(o.value.url_foto);const n=h(null),q=()=>{const t=new FormData;t.append("id",o.value.id+""),t.append("name",o.value.name),t.append("email",o.value.email),t.append("password",o.value.password+""),t.append("rol",o.value.rol+""),n.value&&t.append("url_foto",n.value[0]),_("guardar",t)},I=O(()=>K(d.value)),B=()=>{n.value&&(i.value=URL.createObjectURL(n.value[0]))},R=()=>{i.value="",n.value=null},E=t=>{var c,U;const r=t.target,e=((c=r.files)==null?void 0:c[0])||null;n.value=((U=r.files)==null?void 0:U[0])||null,e&&(i.value=URL.createObjectURL(e))},L=[{id:"admin",nombre:"admin"},{id:"capturista",nombre:"capturista"}];return(t,r)=>(p(),w(M,null,{default:s(()=>[l(S,null,{default:s(()=>[X]),_:1}),l(z,{onSubmit:x(q,["prevent"])},{default:s(()=>[l(S,null,{default:s(()=>[a("div",Y,[a("div",Z,[d.value?(p(),w(j,{key:0,"inline-actions":"",class:"text-white bg-red"},{default:s(()=>{var e;return[u(F(((e=v(f))==null?void 0:e.message)||"")+" ",1),a("ul",null,[(p(!0),C($,null,P(I.value,c=>(p(),C("li",{key:c},F(c),1))),128))])]}),_:1})):A("",!0)]),a("div",ee,[l(b,{modelValue:o.value.name,"onUpdate:modelValue":r[0]||(r[0]=e=>o.value.name=e),"label-slot":"",rules:[e=>!!e||"El nombre del usuario es requerido",e=>e.length>3&&e.length<255||"Debe tener m\xE1s de 3 caracteres y menos de 255"]},{label:s(()=>[u(" Nombre completo del usuario "),oe]),_:1},8,["modelValue","rules"])]),a("div",re,[l(b,{modelValue:o.value.email,"onUpdate:modelValue":r[1]||(r[1]=e=>o.value.email=e),"label-slot":"",rules:[e=>!!e||"El correo es requerido",e=>e.length>3&&e.length<255||"Debe tener m\xE1s de 3 caracteres y menos de 255"]},{label:s(()=>[u(" Correo electr\xF3nico "),ae]),_:1},8,["modelValue","rules"])]),a("div",le,[l(b,{modelValue:o.value.password,"onUpdate:modelValue":r[2]||(r[2]=e=>o.value.password=e),"label-slot":"",type:"password",rules:[e=>!!e||"La contrase\xF1a es requerido",e=>e.length>3&&e.length<255||"Debe tener m\xE1s de 3 caracteres y menos de 255"]},{label:s(()=>[u(" Contrase\xF1a "),se]),_:1},8,["modelValue","rules"])]),a("div",te,[l(G,{modelValue:o.value.rol,"onUpdate:modelValue":r[3]||(r[3]=e=>o.value.rol=e),options:L,"label-slot":"","option-value":"id","option-label":"nombre","emit-value":"","map-options":"",rules:[e=>!!e||"Selecciona un rol"]},{label:s(()=>[u(" Selecciona rol "),ne]),_:1},8,["modelValue","rules"])]),a("div",ie,[l(H,{"bottom-slots":"",modelValue:n.value,"onUpdate:modelValue":[r[5]||(r[5]=e=>n.value=e),B],"label-slot":"",counter:"",multiple:"",accept:".jpg, image/*",onChange:E},{label:s(()=>[u(" Imagen de perfil: ")]),prepend:s(()=>[l(y,{name:"cloud_upload",onClick:r[4]||(r[4]=x(()=>{},["stop","prevent"]))})]),append:s(()=>[l(y,{name:"close",onClick:x(R,["stop","prevent"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue"]),a("div",null,[l(J,{src:v(i),alt:"Perfil"},null,8,["src"])])]),a("div",ue,[l(T,{label:"Guardar",color:"primary",type:"submit",loading:g.value},null,8,["loading"])])])]),_:1})]),_:1},8,["onSubmit"])]),_:1}))}}),Oe=k({__name:"CrearUsuario",setup(Q){const _=h({id:"",name:"",password:"",email:"",url_foto:"",rol:""}),{createResource:m,isLoadingCreate:o,errorServer:g}=W(),d=i=>{m(i)},f=[{label:"Usuarios",icon:"people",to:"listar-usuario"},{label:"Crear usuario",icon:"add_circle_outline"}];return(i,n)=>(p(),C("div",null,[l(D,{pages:f,titlePage:"Registrar usuario"}),l(me,{user:_.value,loading:v(o),errorServer:v(g),onGuardar:d},null,8,["user","loading","errorServer"])]))}});export{Oe as default};
