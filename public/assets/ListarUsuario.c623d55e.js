import{v as $,x as S,r as _,q as f,s as g,d as e,u as n,t as o,B as v,aa as k,Q as c,A as V,z as F,ab as A}from"./index.6aee2e30.js";import{a as C,Q as B}from"./QCard.cb508ff7.js";import{Q as L}from"./QPage.6971c865.js";import{_ as M}from"./BreadcrumbNav.15d15e07.js";import{g as I}from"./getUser.55342a9c.js";import{Q as T,a as N,b as t,c as D}from"./QTable.183ef9e5.js";import{Q as j}from"./QBtnGroup.36c427f5.js";import{u as G}from"./useRecursosMultiples.c09a7537.js";import{_ as R}from"./DialogEliminar.4f6007ed.js";import{u as O}from"./useEliminarRecurso.5edd136d.js";import{Q as P}from"./QTooltip.91dcf398.js";import{u as H}from"./useRecursosEliminados.ea215324.js";import{u as J}from"./useForzarEliminaci\xF3nRecurso.b21abdff.js";import{u as K}from"./useRestaurarRecurso.f1bc86f8.js";import"./use-dark.6d3765c8.js";import"./QList.6f85881e.js";import"./QMarkupTable.1bfa3264.js";import"./QSelect.e7df04d7.js";import"./use-key-composition.138705f4.js";import"./uid.42677368.js";import"./focus-manager.05708ea9.js";import"./QChip.ec11ad7b.js";import"./QItem.7d9afe8e.js";import"./QItemLabel.7e1a4be7.js";import"./QMenu.7408e287.js";import"./position-engine.9bef8d76.js";import"./selection.76539ba5.js";import"./focusout.012d42f6.js";import"./QDialog.84ddac0d.js";import"./use-prevent-scroll.46e9c667.js";import"./use-form.7a2b9d0c.js";import"./format.2bc25e5f.js";import"./use-checkbox.d57b3bde.js";import"./use-fullscreen.26bf297d.js";import"./documentosApi.f9b655d1.js";import"./axios.a596eead.js";import"./useQuery.esm.76380881.js";import"./useQueryClient.esm.ef5065e6.js";import"./utils.esm.df383359.js";import"./QCardActions.23796629.js";import"./ClosePopup.7bc30a2d.js";import"./useMutation.esm.2b00b620.js";import"./mutation.esm.5dbe1dbb.js";const W=()=>G("/users",["users"],{included:"roles"},{staleTime:1e3*60*60}),q=[{field:"name",name:"name",label:"Usuario",align:"left",sortable:!0},{field:"email",name:"email",label:"Correo electr\xF3nico",align:"left",sortable:!0},{field:"rol",name:"rol",label:"Rol",align:"left",sortable:!0},{field:"accion",name:"accion",label:"Acci\xF3n",align:"right"}],X=()=>O("/users","Se elimin\xF3 el usuario"),Y={key:0},Z={key:1},ee=$({__name:"TablaUsers",setup(z){const a=S(),i=_(!1),u=_(""),{data:p,isLoading:y}=W(),{eliminarRecurso:h}=X(),b=m=>{a.push({name:"ver-usuario",params:{id:m}})},w=m=>{a.push({name:"editar-usuario",params:{id:m}})},E=m=>{i.value=!0,u.value=m};return(m,U)=>(f(),g("div",null,[e(R,{modelValue:i.value,"onUpdate:modelValue":U[0]||(U[0]=r=>i.value=r),"recurso-id":u.value,onEliminar:n(h)},null,8,["modelValue","recurso-id","onEliminar"]),e(T,{flat:"",bordered:"",rows:n(p),columns:n(q),"row-key":"name",loading:n(y),pagination:{rowsPerPage:15}},{body:o(r=>[e(N,{props:r},{default:o(()=>[e(t,{key:"name",props:r},{default:o(()=>[v(k(r.row.name),1)]),_:2},1032,["props"]),e(t,{key:"email",props:r},{default:o(()=>[v(k(r.row.email),1)]),_:2},1032,["props"]),e(t,{key:"rol",props:r},{default:o(()=>[r.row.roles&&r.row.roles.length>0?(f(),g("div",Y,k(r.row.roles[0].name),1)):(f(),g("div",Z,"Sin rol"))]),_:2},1032,["props"]),e(t,{key:"accion",props:r},{default:o(()=>[e(j,{push:""},{default:o(()=>[e(c,{size:"sm",color:"info",push:"",glossy:"",icon:"visibility",onClick:x=>b(r.row.id)},null,8,["onClick"]),e(c,{size:"sm",color:"secondary",push:"",glossy:"",icon:"edit",onClick:x=>w(r.row.id)},null,8,["onClick"]),e(c,{size:"sm",color:"negative",push:"",glossy:"",icon:"delete",onClick:x=>E(r.row.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])]))}}),oe=()=>H("users-trashed",["users-trashed"],{included:"roles"},{staleTime:1e3*60*60}),se=()=>J("users-force-delete","users-trashed"),re=()=>K("/users-restore","users","users-trashed"),ae={class:"flex justify-end q-gutter-md q-mb-md"},le={key:0},ie={key:1},te=$({__name:"TablaUserEliminado",setup(z){const a=_([]),i=_(!1),u=_(!1),p=_(""),{data:y,isLoading:h}=oe(),{eliminarRecurso:b}=se(),{restaurarRecurso:w}=re(),E=d=>{b(d)},m=()=>{i.value=!0},U=d=>{u.value=!0,p.value=d},r=()=>{const d=a.value.map(l=>l.id.toString());w(d),a.value=[]},x=()=>{const d=a.value.map(l=>l.id.toString());b(d),a.value=[]};return(d,l)=>(f(),g("div",null,[e(R,{modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=s=>u.value=s),"recurso-id":p.value,icon:"delete_forever",onEliminar:E,mensaje:"\xBFEstas seguro de eliminar este usuario? Si se llega a eliminar, todos los datos se perder\xE1n para simpre y por simpre. \xA1Piensalo!"},null,8,["modelValue","recurso-id"]),e(R,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=s=>i.value=s),"recurso-id":a.value,icon:"delete_forever",onEliminar:x,mensaje:"\xBFEstas seguro de eliminar estos usuarios? Si se llega a eliminar, todos los datos se perder\xE1n para simpre y por simpre. \xA1Pi\xE9nsalo!"},null,8,["modelValue","recurso-id"]),V("div",ae,[e(c,{disable:!a.value.length,color:"secondary",icon:"restore",onClick:r},null,8,["disable"]),e(c,{disable:!a.value.length,color:"negative",icon:"delete_forever",onClick:m},null,8,["disable"])]),e(T,{flat:"",bordered:"",rows:n(y),columns:n(q),"row-key":"id",loading:n(h),pagination:{rowsPerPage:10},selection:"multiple",selected:a.value,"onUpdate:selected":l[2]||(l[2]=s=>a.value=s)},{body:o(s=>[e(N,{props:s},{default:o(()=>[e(t,null,{default:o(()=>[e(D,{modelValue:s.selected,"onUpdate:modelValue":Q=>s.selected=Q},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(t,{key:"name",props:s},{default:o(()=>[v(k(s.row.name),1)]),_:2},1032,["props"]),e(t,{key:"email",props:s},{default:o(()=>[v(k(s.row.email),1)]),_:2},1032,["props"]),e(t,{key:"rol",props:s},{default:o(()=>[s.row.roles&&s.row.roles.length>0?(f(),g("div",le,k(s.row.roles[0].name),1)):(f(),g("div",ie,"Sin rol"))]),_:2},1032,["props"]),e(t,{key:"accion",props:s},{default:o(()=>[e(j,{push:""},{default:o(()=>[e(c,{size:"sm",color:"secondary",push:"",glossy:"",icon:"restore",onClick:Q=>n(w)(s.row.id)},{default:o(()=>[e(P,null,{default:o(()=>[v(" Restaurar usuario ")]),_:1})]),_:2},1032,["onClick"]),e(c,{size:"sm",color:"negative",push:"",glossy:"",icon:"delete_forever",onClick:Q=>U(s.row.id)},{default:o(()=>[e(P,null,{default:o(()=>[v(" Forzar eliminaci\xF3n ")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading","selected"])]))}}),ne={class:"flex justify-between items-center"},ue=V("div",{class:"fontsize-15 text-weight-light"},"Usuarios",-1),me=V("div",{class:"fontsize-15 text-weight-light"},"Usuarios eliminados",-1),eo=$({__name:"ListarUsuario",setup(z){const a=S(),i=()=>{a.push({name:"crear-usuario"})},u=I(),p=[{label:"Usuarios",icon:"people"}];return(y,h)=>(f(),F(L,{padding:""},{default:o(()=>[e(M,{pages:p,titlePage:"Lista de usuarios"}),e(B,null,{default:o(()=>[e(C,null,{default:o(()=>[V("div",ne,[ue,e(c,{label:"Nuevo",icon:"add_circle_outline",color:"secondary",size:"md",padding:"xs",onClick:i})])]),_:1}),e(C,null,{default:o(()=>[e(ee)]),_:1})]),_:1}),n(u)==="admin"?(f(),F(B,{key:0,class:"q-mt-md"},{default:o(()=>[e(C,null,{default:o(()=>[me]),_:1}),e(C,null,{default:o(()=>[e(te)]),_:1})]),_:1})):A("",!0)]),_:1}))}});export{eo as default};
