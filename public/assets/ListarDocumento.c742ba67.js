import{v as R,x as P,r as _,q as D,s as T,d as e,u as l,t as o,B as d,aa as v,Q as f,A as C,z as F,ab as j}from"./index.511ce7da.js";import{a as w,Q as $}from"./QCard.c27ef320.js";import{Q as q}from"./QPage.30c35a64.js";import{Q as S,a as U,b as s,c as L}from"./QTable.f4abf1fa.js";import{Q as N}from"./QBtnGroup.79c77c2f.js";import{u as M}from"./useObtenerDocumentos.c5cd9585.js";import{u as Y}from"./useEliminarRecurso.17e7cd53.js";import{_ as Q}from"./DialogEliminar.6699e732.js";import{_ as I}from"./BreadcrumbNav.83440b84.js";import{g as G}from"./getUser.70da419d.js";import{Q as B}from"./QTooltip.e2728da7.js";import{d as O}from"./date.0cc50602.js";import{u as H}from"./useRecursosEliminados.46b28af2.js";import{u as J}from"./useForzarEliminaci\xF3nRecurso.e97b01b3.js";import{u as K}from"./useRestaurarRecurso.3633c15d.js";import"./use-dark.2ddafa12.js";import"./QList.dff4fc64.js";import"./QMarkupTable.1a93edc0.js";import"./QSelect.bbb55090.js";import"./use-key-composition.8ed1270c.js";import"./uid.42677368.js";import"./focus-manager.05708ea9.js";import"./QChip.ec7c10df.js";import"./QItem.f46130b3.js";import"./QItemLabel.07feaa09.js";import"./QMenu.97067286.js";import"./position-engine.26205469.js";import"./selection.93e3bd86.js";import"./focusout.f4d95c7f.js";import"./QDialog.d254dd3f.js";import"./use-prevent-scroll.b0ece3de.js";import"./use-form.89097415.js";import"./format.2bc25e5f.js";import"./use-checkbox.c3671c6f.js";import"./use-fullscreen.b6949ea7.js";import"./useRecursosMultiples.e7f7cf94.js";import"./documentosApi.5a915086.js";import"./axios.a596eead.js";import"./useQuery.esm.07b4cbcd.js";import"./useQueryClient.esm.18f38723.js";import"./utils.esm.c4fd8260.js";import"./useMutation.esm.1025419c.js";import"./mutation.esm.d177ca9b.js";import"./QCardActions.2508ac56.js";import"./ClosePopup.41b92e43.js";const A=[{field:"nombre_documento",name:"nombre",label:"Nombre documento",align:"left",sortable:!0},{field:"abrev_nombre",name:"abrev_nombre",label:"Abrev.",align:"left",sortable:!0},{field:"fecha_limite",name:"fecha_limite",label:"Fecha l\xEDmite de entrega",align:"left",sortable:!0},{field:"accion",name:"accion",label:"Acci\xF3n",align:"right"}],W=()=>Y("/documentos","Se elimin\xF3 el documento"),X=R({__name:"TablaDocumentos",setup(z){const r=P(),i=_(!1),m=_(""),{data:p,isLoading:b}=M(),{eliminarRecurso:g}=W(),h=u=>{r.push({name:"ver-documento",params:{id:u}})},k=u=>{r.push({name:"editar-documento",params:{id:u}})},E=u=>{i.value=!0,m.value=u};return(u,y)=>(D(),T("div",null,[e(Q,{modelValue:i.value,"onUpdate:modelValue":y[0]||(y[0]=a=>i.value=a),"recurso-id":m.value,onEliminar:l(g)},null,8,["modelValue","recurso-id","onEliminar"]),e(S,{flat:"",bordered:"",rows:l(p),columns:l(A),"row-key":"name",loading:l(b),pagination:{rowsPerPage:15}},{body:o(a=>[e(U,{props:a},{default:o(()=>[e(s,{key:"nombre",props:a},{default:o(()=>[d(v(a.row.nombre_documento),1)]),_:2},1032,["props"]),e(s,{key:"abrev_nombre",props:a},{default:o(()=>[d(v(a.row.abrev_nombre),1)]),_:2},1032,["props"]),e(s,{key:"fecha_limite",props:a},{default:o(()=>[d(v(a.row.fecha_limite),1)]),_:2},1032,["props"]),e(s,{key:"accion",props:a},{default:o(()=>[e(N,{push:""},{default:o(()=>[e(f,{size:"sm",color:"info",push:"",glossy:"",icon:"visibility",onClick:x=>h(a.row.id)},null,8,["onClick"]),e(f,{size:"sm",color:"secondary",push:"",glossy:"",icon:"edit",onClick:x=>k(a.row.id)},null,8,["onClick"]),e(f,{size:"sm",color:"negative",push:"",glossy:"",icon:"delete",onClick:x=>E(a.row.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])]))}}),Z=()=>H("documentos-trashed",["documentos-trashed"],{},{staleTime:1e3*60*60}),ee=()=>J("documentos-force-delete","documentos-trashed"),oe=()=>K("/documentos-restore","documentos","documentos-trashed"),te={class:"flex justify-end q-gutter-md q-mb-md"},ae=R({__name:"TablaDocumentoEliminado",setup(z){const r=_([]),i=_(!1),m=_(!1),p=_(""),{data:b,isLoading:g}=Z(),{eliminarRecurso:h}=ee(),{restaurarRecurso:k}=oe(),E=c=>{h(c)},u=()=>{i.value=!0},y=c=>{m.value=!0,p.value=c},a=()=>{const c=r.value.map(n=>n.id.toString());k(c),r.value=[]},x=()=>{const c=r.value.map(n=>n.id.toString());h(c),r.value=[]};return(c,n)=>(D(),T("div",null,[e(Q,{modelValue:m.value,"onUpdate:modelValue":n[0]||(n[0]=t=>m.value=t),"recurso-id":p.value,icon:"delete_forever",onEliminar:E,mensaje:"\xBFEstas seguro de eliminar este documento? Si se llega a eliminar, todos los datos se perder\xE1n para simpre y por simpre. \xA1Piensalo!"},null,8,["modelValue","recurso-id"]),e(Q,{modelValue:i.value,"onUpdate:modelValue":n[1]||(n[1]=t=>i.value=t),"recurso-id":r.value,icon:"delete_forever",onEliminar:x,mensaje:"\xBFEstas seguro de eliminar estos documentos? Si se llega a eliminar, todos los datos se perder\xE1n para simpre y por simpre. \xA1Pi\xE9nsalo!"},null,8,["modelValue","recurso-id"]),C("div",te,[e(f,{disable:!r.value.length,color:"secondary",icon:"restore",onClick:a},null,8,["disable"]),e(f,{disable:!r.value.length,color:"negative",icon:"delete_forever",onClick:u},null,8,["disable"])]),e(S,{flat:"",bordered:"",rows:l(b),columns:l(A),"row-key":"id",loading:l(g),pagination:{rowsPerPage:15},selection:"multiple",selected:r.value,"onUpdate:selected":n[2]||(n[2]=t=>r.value=t)},{body:o(t=>[e(U,{props:t},{default:o(()=>[e(s,null,{default:o(()=>[e(L,{modelValue:t.selected,"onUpdate:modelValue":V=>t.selected=V},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(s,{key:"nombre",props:t},{default:o(()=>[d(v(t.row.nombre_documento),1)]),_:2},1032,["props"]),e(s,{key:"abrev_nombre",props:t},{default:o(()=>[d(v(t.row.abrev_nombre),1)]),_:2},1032,["props"]),e(s,{key:"fecha_limite",props:t},{default:o(()=>[d(v(l(O).formatDate(t.row.fecha_limite,"DD/MM/YYYY")),1)]),_:2},1032,["props"]),e(s,{key:"accion",props:t},{default:o(()=>[e(N,{push:""},{default:o(()=>[e(f,{size:"sm",color:"secondary",push:"",glossy:"",icon:"restore",onClick:V=>l(k)(t.row.id)},{default:o(()=>[e(B,null,{default:o(()=>[d(" Restaurar documento ")]),_:1})]),_:2},1032,["onClick"]),e(f,{size:"sm",color:"negative",push:"",glossy:"",icon:"delete_forever",onClick:V=>y(t.row.id)},{default:o(()=>[e(B,null,{default:o(()=>[d(" Forzar eliminaci\xF3n ")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading","selected"])]))}}),re={class:"flex justify-between items-center"},ne=C("div",{class:"fontsize-15 text-weight-light"},"Documentos",-1),le=C("div",{class:"fontsize-15 text-weight-light"},"Documentos eliminadas",-1),Xe=R({__name:"ListarDocumento",setup(z){const r=P(),i=()=>{r.push({name:"crear-documento"})},m=G(),p=[{label:"Documentos",icon:"description"}];return(b,g)=>(D(),F(q,{padding:""},{default:o(()=>[e(I,{pages:p,titlePage:"Lista de documentos"}),e($,null,{default:o(()=>[e(w,null,{default:o(()=>[C("div",re,[ne,e(f,{label:"Nuevo",icon:"add_circle_outline",color:"secondary",size:"md",padding:"xs",onClick:i})])]),_:1}),e(w,null,{default:o(()=>[e(X)]),_:1})]),_:1}),l(m)==="admin"?(D(),F($,{key:0,class:"q-mt-md"},{default:o(()=>[e(w,null,{default:o(()=>[le]),_:1}),e(w,null,{default:o(()=>[e(ae)]),_:1})]),_:1})):j("",!0)]),_:1}))}});export{Xe as default};
