import{v as z,r as _,q as p,s as g,d as e,A as E,Q as u,t as r,u as n,B as v,aa as b,x as T,z as F,ab as A}from"./index.6aee2e30.js";import{a as V,Q as P}from"./QCard.cb508ff7.js";import{Q as L}from"./QPage.6971c865.js";import{Q as S,a as U,b as i,c as D}from"./QTable.183ef9e5.js";import{Q as N}from"./QTooltip.91dcf398.js";import{Q as j}from"./QBtnGroup.36c427f5.js";import{u as I}from"./useRecursosEliminados.ea215324.js";import{_ as R}from"./DialogEliminar.4f6007ed.js";import{u as M}from"./useForzarEliminaci\xF3nRecurso.b21abdff.js";import{u as G}from"./useRestaurarRecurso.f1bc86f8.js";import{u as O}from"./useObtenerCarreras.bd3d3ae0.js";import{u as H}from"./useEliminarRecurso.5edd136d.js";import{_ as J}from"./BreadcrumbNav.15d15e07.js";import{g as K}from"./getUser.55342a9c.js";import"./use-dark.6d3765c8.js";import"./QList.6f85881e.js";import"./QMarkupTable.1bfa3264.js";import"./QSelect.e7df04d7.js";import"./use-key-composition.138705f4.js";import"./uid.42677368.js";import"./focus-manager.05708ea9.js";import"./QChip.ec11ad7b.js";import"./QItem.7d9afe8e.js";import"./QItemLabel.7e1a4be7.js";import"./QMenu.7408e287.js";import"./position-engine.9bef8d76.js";import"./selection.76539ba5.js";import"./focusout.012d42f6.js";import"./QDialog.84ddac0d.js";import"./use-prevent-scroll.46e9c667.js";import"./use-form.7a2b9d0c.js";import"./format.2bc25e5f.js";import"./use-checkbox.d57b3bde.js";import"./use-fullscreen.26bf297d.js";import"./documentosApi.f9b655d1.js";import"./axios.a596eead.js";import"./useQuery.esm.76380881.js";import"./useQueryClient.esm.ef5065e6.js";import"./utils.esm.df383359.js";import"./QCardActions.23796629.js";import"./ClosePopup.7bc30a2d.js";import"./useMutation.esm.2b00b620.js";import"./mutation.esm.5dbe1dbb.js";import"./useRecursosMultiples.c09a7537.js";const W=()=>I("carreras-trashed",["carreras-trashed"],{included:"departamento"},{staleTime:1e3*60*60}),q=[{field:"nombre",name:"nombre",label:"Nombre de la carrera",align:"left",sortable:!0},{field:"clave",name:"clave",label:"Clave",align:"left",sortable:!0},{field:"departamento_id",name:"departamento",label:"Departamento",align:"left",sortable:!0},{field:"accion",name:"accion",label:"Acci\xF3n",align:"right"}],X=()=>M("carreras-force-delete","carreras-trashed"),Y=()=>G("/carreras-restore","carreras","carreras-trashed"),Z={class:"flex justify-end q-gutter-md q-mb-md"},ee={key:0},re={key:1},ae=z({__name:"TablaCarreraEliminado",setup(B){const t=_([]),s=_(!1),d=_(!1),f=_(""),{data:C,isLoading:k}=W(),{eliminarRecurso:y}=X(),{restaurarRecurso:h}=Y(),Q=m=>{y(m)},c=()=>{s.value=!0},w=m=>{d.value=!0,f.value=m},o=()=>{const m=t.value.map(l=>l.id.toString());h(m),t.value=[]},x=()=>{const m=t.value.map(l=>l.id.toString());y(m),t.value=[]};return(m,l)=>(p(),g("div",null,[e(R,{modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=a=>d.value=a),"recurso-id":f.value,icon:"delete_forever",onEliminar:Q,mensaje:"\xBFEstas seguro de eliminar esta carrera? Si se llega a eliminar, todos los datos se perder\xE1n para simpre y por simpre. \xA1Piensalo!"},null,8,["modelValue","recurso-id"]),e(R,{modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=a=>s.value=a),"recurso-id":t.value,icon:"delete_forever",onEliminar:x,mensaje:"\xBFEstas seguro de eliminar estas carreras? Si se llega a eliminar, todos los datos se perder\xE1n para simpre y por simpre. \xA1Pi\xE9nsalo!"},null,8,["modelValue","recurso-id"]),E("div",Z,[e(u,{disable:!t.value.length,color:"secondary",icon:"restore",onClick:o},null,8,["disable"]),e(u,{disable:!t.value.length,color:"negative",icon:"delete_forever",onClick:c},null,8,["disable"])]),e(S,{flat:"",bordered:"",rows:n(C),columns:n(q),"row-key":"id",loading:n(k),pagination:{rowsPerPage:10},selection:"multiple",selected:t.value,"onUpdate:selected":l[2]||(l[2]=a=>t.value=a)},{body:r(a=>[e(U,{props:a},{default:r(()=>[e(i,null,{default:r(()=>[e(D,{modelValue:a.selected,"onUpdate:modelValue":$=>a.selected=$},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(i,{key:"nombre",props:a},{default:r(()=>[v(b(a.row.nombre),1)]),_:2},1032,["props"]),e(i,{key:"clave",props:a},{default:r(()=>[v(b(a.row.clave),1)]),_:2},1032,["props"]),e(i,{key:"departamento",props:a},{default:r(()=>[a.row.departamento?(p(),g("div",ee,b(a.row.departamento.nombre),1)):(p(),g("div",re,"No asignado"))]),_:2},1032,["props"]),e(i,{key:"accion",props:a},{default:r(()=>[e(j,{push:""},{default:r(()=>[e(u,{size:"sm",color:"secondary",push:"",glossy:"",icon:"restore",onClick:$=>n(h)(a.row.id)},{default:r(()=>[e(N,null,{default:r(()=>[v(" Restaurar carrera ")]),_:1})]),_:2},1032,["onClick"]),e(u,{size:"sm",color:"negative",push:"",glossy:"",icon:"delete_forever",onClick:$=>w(a.row.id)},{default:r(()=>[e(N,null,{default:r(()=>[v(" Forzar eliminaci\xF3n ")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading","selected"])]))}}),oe=()=>H("/carreras","Se elmin\xF3 la carrera"),te={key:0},le={key:1},se=z({__name:"TablaCarrera",setup(B){const t=T(),s=_(!1),d=_(""),{data:f,isLoading:C}=O(),k=c=>{t.push({name:"ver-carrera",params:{id:c}})},y=c=>{t.push({name:"editar-carrera",params:{id:c}})},{eliminarRecurso:h}=oe(),Q=c=>{s.value=!0,d.value=c};return(c,w)=>(p(),g("div",null,[e(R,{modelValue:s.value,"onUpdate:modelValue":w[0]||(w[0]=o=>s.value=o),"recurso-id":d.value,onEliminar:n(h)},null,8,["modelValue","recurso-id","onEliminar"]),e(S,{flat:"",bordered:"",rows:n(f),columns:n(q),"row-key":"name",loading:n(C),pagination:{rowsPerPage:10}},{body:r(o=>[e(U,{props:o},{default:r(()=>[e(i,{key:"nombre",props:o},{default:r(()=>[v(b(o.row.nombre),1)]),_:2},1032,["props"]),e(i,{key:"clave",props:o},{default:r(()=>[v(b(o.row.clave),1)]),_:2},1032,["props"]),e(i,{key:"departamento",props:o},{default:r(()=>[o.row.departamento?(p(),g("div",te,b(o.row.departamento.nombre),1)):(p(),g("div",le,"No asignado"))]),_:2},1032,["props"]),e(i,{key:"accion",props:o},{default:r(()=>[e(j,{push:""},{default:r(()=>[e(u,{size:"sm",color:"info",push:"",glossy:"",icon:"visibility",onClick:x=>k(o.row.id)},null,8,["onClick"]),e(u,{size:"sm",color:"secondary",push:"",glossy:"",icon:"edit",onClick:x=>y(o.row.id)},null,8,["onClick"]),e(u,{size:"sm",color:"negative",push:"",glossy:"",icon:"delete",onClick:x=>Q(o.row.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])]))}}),ie={class:"flex justify-between items-center"},ne=E("div",{class:"fontsize-15 text-weight-light"},"Carreras",-1),de=E("div",{class:"fontsize-15 text-weight-light"},"Carreras eliminadas",-1),er=z({__name:"ListarCarrera",setup(B){const t=[{label:"Carreras",icon:"local_library"}],s=T(),d=()=>{s.push({name:"crear-carrera"})},f=K();return(C,k)=>(p(),F(L,{padding:""},{default:r(()=>[e(J,{pages:t,titlePage:"Lista de carreras"}),e(P,null,{default:r(()=>[e(V,null,{default:r(()=>[E("div",ie,[ne,e(u,{label:"Nuevo",icon:"add_circle_outline",color:"secondary",size:"md",padding:"xs",onClick:d})])]),_:1}),e(V,null,{default:r(()=>[e(se)]),_:1})]),_:1}),n(f)==="admin"?(p(),F(P,{key:0,class:"q-mt-md"},{default:r(()=>[e(V,null,{default:r(()=>[de]),_:1}),e(V,null,{default:r(()=>[e(ae)]),_:1})]),_:1})):A("",!0)]),_:1}))}});export{er as default};
