import{v as z,x as P,r as g,q as h,s as S,d as e,u,t as o,B as t,aa as n,Q as f,A as C,z as $,ab as A}from"./index.6aee2e30.js";import{a as x,Q as B}from"./QCard.cb508ff7.js";import{Q as L}from"./QPage.6971c865.js";import{_ as M}from"./BreadcrumbNav.15d15e07.js";import{g as D}from"./getUser.55342a9c.js";import{Q as U,a as N,b as s,c as G}from"./QTable.183ef9e5.js";import{Q as j}from"./QBtnGroup.36c427f5.js";import{_ as R}from"./DialogEliminar.4f6007ed.js";import{u as I}from"./useRecursosMultiples.c09a7537.js";import{u as O}from"./useEliminarRecurso.5edd136d.js";import{Q as F}from"./QTooltip.91dcf398.js";import{u as H}from"./useRecursosEliminados.ea215324.js";import{u as J}from"./useForzarEliminaci\xF3nRecurso.b21abdff.js";import{u as K}from"./useRestaurarRecurso.f1bc86f8.js";import"./use-dark.6d3765c8.js";import"./QList.6f85881e.js";import"./QMarkupTable.1bfa3264.js";import"./QSelect.e7df04d7.js";import"./use-key-composition.138705f4.js";import"./uid.42677368.js";import"./focus-manager.05708ea9.js";import"./QChip.ec11ad7b.js";import"./QItem.7d9afe8e.js";import"./QItemLabel.7e1a4be7.js";import"./QMenu.7408e287.js";import"./position-engine.9bef8d76.js";import"./selection.76539ba5.js";import"./focusout.012d42f6.js";import"./QDialog.84ddac0d.js";import"./use-prevent-scroll.46e9c667.js";import"./use-form.7a2b9d0c.js";import"./format.2bc25e5f.js";import"./use-checkbox.d57b3bde.js";import"./use-fullscreen.26bf297d.js";import"./QCardActions.23796629.js";import"./ClosePopup.7bc30a2d.js";import"./documentosApi.f9b655d1.js";import"./axios.a596eead.js";import"./useQuery.esm.76380881.js";import"./useQueryClient.esm.ef5065e6.js";import"./utils.esm.df383359.js";import"./useMutation.esm.2b00b620.js";import"./mutation.esm.5dbe1dbb.js";const W=()=>I("/empresas",["empresas"],{},{staleTime:1e3*60*60}),X=()=>O("/empresas","Se elimin\xF3 la empresa"),q=[{field:"nombre",name:"nombre",label:"Nombre de la empresa",align:"left",sortable:!0},{field:"giro",name:"giro",label:"Giro",align:"left",sortable:!0},{field:"telefono",name:"telefono",label:"Tel\xE9fono",align:"left",sortable:!0},{field:"domicilio",name:"domicilio",label:"Domicilio",align:"left",sortable:!0},{field:"titular",name:"titular",label:"Titular",align:"left",sortable:!0},{field:"accion",name:"accion",label:"Acci\xF3n",align:"right"}],Y=z({__name:"TablaEmpresa",setup(T){const l=P(),m=g(!1),d=g(""),{data:_,isLoading:v}=W(),{eliminarRecurso:b}=X(),E=c=>{l.push({name:"ver-empresa",params:{id:c}})},k=c=>{l.push({name:"editar-empresa",params:{id:c}})},V=c=>{m.value=!0,d.value=c};return(c,y)=>(h(),S("div",null,[e(R,{modelValue:m.value,"onUpdate:modelValue":y[0]||(y[0]=r=>m.value=r),"recurso-id":d.value,onEliminar:u(b)},null,8,["modelValue","recurso-id","onEliminar"]),e(U,{flat:"",bordered:"",rows:u(_),columns:u(q),"row-key":"nombre",loading:u(v),pagination:{rowsPerPage:15}},{body:o(r=>[e(N,{props:r},{default:o(()=>[e(s,{key:"nombre",props:r},{default:o(()=>[t(n(r.row.nombre),1)]),_:2},1032,["props"]),e(s,{key:"giro",props:r},{default:o(()=>[t(n(r.row.giro),1)]),_:2},1032,["props"]),e(s,{key:"telefono",props:r},{default:o(()=>[t(n(r.row.telefono),1)]),_:2},1032,["props"]),e(s,{key:"domicilio",props:r},{default:o(()=>[t(n(r.row.domicilio),1)]),_:2},1032,["props"]),e(s,{key:"titular",props:r},{default:o(()=>[t(n(r.row.titular),1)]),_:2},1032,["props"]),e(s,{key:"accion",props:r},{default:o(()=>[e(j,{push:""},{default:o(()=>[e(f,{size:"sm",color:"info",push:"",glossy:"",icon:"visibility",onClick:w=>E(r.row.id)},null,8,["onClick"]),e(f,{size:"sm",color:"secondary",push:"",glossy:"",icon:"edit",onClick:w=>k(r.row.id)},null,8,["onClick"]),e(f,{size:"sm",color:"negative",push:"",glossy:"",icon:"delete",onClick:w=>V(r.row.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])]))}}),Z=()=>H("empresas-trashed",["empresas-trashed"],{},{staleTime:1e3*60*60}),ee=()=>J("empresas-force-delete","empresas-trashed"),oe=()=>K("/empresas-restore","empresas","empresas-trashed"),ae={class:"flex justify-end q-gutter-md q-mb-md"},re=z({__name:"TablaEmpresaEliminado",setup(T){const l=g([]),m=g(!1),d=g(!1),_=g(""),{data:v,isLoading:b}=Z(),{eliminarRecurso:E}=ee(),{restaurarRecurso:k}=oe(),V=p=>{E(p)},c=()=>{m.value=!0},y=p=>{d.value=!0,_.value=p},r=()=>{const p=l.value.map(i=>i.id.toString());k(p),l.value=[]},w=()=>{const p=l.value.map(i=>i.id.toString());E(p),l.value=[]};return(p,i)=>(h(),S("div",null,[e(R,{modelValue:d.value,"onUpdate:modelValue":i[0]||(i[0]=a=>d.value=a),"recurso-id":_.value,icon:"delete_forever",onEliminar:V,mensaje:"\xBFEstas seguro de eliminar esta empresa? Si se llega a eliminar, todos los datos se perder\xE1n para simpre y por simpre. \xA1Piensalo!"},null,8,["modelValue","recurso-id"]),e(R,{modelValue:m.value,"onUpdate:modelValue":i[1]||(i[1]=a=>m.value=a),"recurso-id":l.value,icon:"delete_forever",onEliminar:w,mensaje:"\xBFEstas seguro de eliminar estas empresas? Si se llega a eliminar, todos los datos se perder\xE1n para simpre y por simpre. \xA1Pi\xE9nsalo!"},null,8,["modelValue","recurso-id"]),C("div",ae,[e(f,{disable:!l.value.length,color:"secondary",icon:"restore",onClick:r},null,8,["disable"]),e(f,{disable:!l.value.length,color:"negative",icon:"delete_forever",onClick:c},null,8,["disable"])]),e(U,{flat:"",bordered:"",rows:u(v),columns:u(q),"row-key":"id",loading:u(b),pagination:{rowsPerPage:15},selection:"multiple",selected:l.value,"onUpdate:selected":i[2]||(i[2]=a=>l.value=a)},{body:o(a=>[e(N,{props:a},{default:o(()=>[e(s,null,{default:o(()=>[e(G,{modelValue:a.selected,"onUpdate:modelValue":Q=>a.selected=Q},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(s,{key:"nombre",props:a},{default:o(()=>[t(n(a.row.nombre),1)]),_:2},1032,["props"]),e(s,{key:"giro",props:a},{default:o(()=>[t(n(a.row.giro),1)]),_:2},1032,["props"]),e(s,{key:"telefono",props:a},{default:o(()=>[t(n(a.row.telefono),1)]),_:2},1032,["props"]),e(s,{key:"domicilio",props:a},{default:o(()=>[t(n(a.row.domicilio),1)]),_:2},1032,["props"]),e(s,{key:"titular",props:a},{default:o(()=>[t(n(a.row.titular),1)]),_:2},1032,["props"]),e(s,{key:"accion",props:a},{default:o(()=>[e(j,{push:""},{default:o(()=>[e(f,{size:"sm",color:"secondary",push:"",glossy:"",icon:"restore",onClick:Q=>u(k)(a.row.id)},{default:o(()=>[e(F,null,{default:o(()=>[t(" Restaurar empresa ")]),_:1})]),_:2},1032,["onClick"]),e(f,{size:"sm",color:"negative",push:"",glossy:"",icon:"delete_forever",onClick:Q=>y(a.row.id)},{default:o(()=>[e(F,null,{default:o(()=>[t(" Forzar eliminaci\xF3n ")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading","selected"])]))}}),le={class:"flex justify-between items-center"},se=C("div",{class:"fontsize-15 text-weight-light"},"Empresas",-1),te=C("div",{class:"fontsize-15 text-weight-light"},"Empresas eliminadas",-1),We=z({__name:"ListarEmpresa",setup(T){const l=P(),m=()=>{l.push({name:"crear-empresa"})},d=D(),_=[{label:"Empresas",icon:"domain"}];return(v,b)=>(h(),$(L,{padding:""},{default:o(()=>[e(M,{pages:_,titlePage:"Lista de empresas"}),e(B,null,{default:o(()=>[e(x,null,{default:o(()=>[C("div",le,[se,e(f,{label:"Nuevo",icon:"add_circle_outline",color:"secondary",size:"md",padding:"xs",onClick:m})])]),_:1}),e(x,null,{default:o(()=>[e(Y)]),_:1})]),_:1}),u(d)==="admin"?(h(),$(B,{key:0,class:"q-mt-md"},{default:o(()=>[e(x,null,{default:o(()=>[te]),_:1}),e(x,null,{default:o(()=>[e(re)]),_:1})]),_:1})):A("",!0)]),_:1}))}});export{We as default};
