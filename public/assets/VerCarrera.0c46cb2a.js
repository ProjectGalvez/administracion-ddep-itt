import{Q as T}from"./QPage.6971c865.js";import{v as $,aM as C,q as l,z as u,Q,r as G,w as K,x as O,s as x,d as a,t as r,_ as L,A as e,u as i,ab as z,F as V,ar as H,ap as q,B as d,aa as s,aR as J,C as I,D as M,ao as B,aq as W}from"./index.6aee2e30.js";import{_ as X}from"./BreadcrumbNav.15d15e07.js";import{_ as N}from"./LoaderSpinner.e73a4608.js";import{u as Z}from"./useVerCarrera.27c52dbf.js";import{Q as P,a as g}from"./QCard.cb508ff7.js";import{Q as S}from"./QImg.7c114304.js";import{Q as ee}from"./QSelect.e7df04d7.js";import{Q as k}from"./QChip.ec11ad7b.js";import{Q as te}from"./QBtnGroup.36c427f5.js";import{Q as oe}from"./QCircularProgress.f50dd3f5.js";import{Q as ae}from"./QMarkupTable.1bfa3264.js";import{d as re}from"./documentosApi.f9b655d1.js";import{u as se}from"./useObtenerPeriodos.420e1b00.js";import{u as le}from"./useQuery.esm.76380881.js";import{d as R}from"./date.9286e3a5.js";import"./useRecursoIndividual.f5a01979.js";import"./use-dark.6d3765c8.js";import"./use-key-composition.138705f4.js";import"./uid.42677368.js";import"./focus-manager.05708ea9.js";import"./QItem.7d9afe8e.js";import"./QItemLabel.7e1a4be7.js";import"./QMenu.7408e287.js";import"./position-engine.9bef8d76.js";import"./selection.76539ba5.js";import"./focusout.012d42f6.js";import"./QDialog.84ddac0d.js";import"./use-prevent-scroll.46e9c667.js";import"./use-form.7a2b9d0c.js";import"./format.2bc25e5f.js";import"./axios.a596eead.js";import"./useRecursosMultiples.c09a7537.js";import"./useQueryClient.esm.ef5065e6.js";import"./utils.esm.df383359.js";const ne=$({__name:"BotonDictamen",props:{carrera_id:{},periodo_id:{}},setup(n){const m=n,o=C(m,"carrera_id"),c=C(m,"periodo_id"),f="http://127.0.0.1:8000/api",h=()=>{const v=f+"/formato-dictamen-anteproyecto/"+o.value+"?periodo_id="+c.value;window.open(v,"_blank")};return(v,w)=>(l(),u(Q,{label:"Dictamen",color:"secondary",size:"sm",onClick:h}))}}),ie=$({__name:"BotonPublicacionResultados",props:{carrera_id:{},periodo_id:{}},setup(n){const m=n,o=C(m,"carrera_id"),c=C(m,"periodo_id"),f="http://127.0.0.1:8000/api",h=()=>{const v=f+"/formato-publicacion-resultados/"+o.value+"?periodo_id="+c.value;window.open(v,"_blank")};return(v,w)=>(l(),u(Q,{label:"Publicaci\xF3n de resultados",color:"info",size:"sm",onClick:h}))}});const D=n=>(I("data-v-0a6f1c25"),n=n(),M(),n),ce=D(()=>e("div",{class:"fontsize-11"},"Residentes en el periodo actual",-1)),de={class:"flex justify-end q-pa-md"},ue={key:1},_e={class:"flex justify-end"},pe=D(()=>e("thead",null,[e("tr",null,[e("th",null,"Estudiante"),e("th",null,"Empresa"),e("th",null,"Proyecto"),e("th",null,"Acciones")])],-1)),me={class:"flex items-center q-gutter-sm"},fe={class:"columna-ancho-maximo"},ve={class:"flex column"},he={class:"columna-ancho-maximo"},ye={class:"flex column"},xe={class:"flex justify-end"},ge={class:"q-pt-sm fontsize-11"},be={key:2},ke=D(()=>e("div",{class:"fontsize-11"}," No hay residentes de esta carrera en este periodo ",-1)),Ce=[ke],$e=$({__name:"ResidentesCarrera",props:{id:{}},setup(n){const o=C(n,"id"),c=G(""),{data:f,isLoading:h}=se(),v=async _=>{let p="/residentes-por-carrera/"+o.value;_.value&&(p+=`?periodoId=${_.value}`);const{data:t}=await re.get(p);return t},{isLoading:w,data:y,refetch:F}=le({queryKey:["residentes",o.value],queryFn:()=>v(c),keepPreviousData:!0,staleTime:1e3*60*60});K(c,async(_,p)=>{_!==p&&await F()});const Y=(_=0,p=0)=>{if(p===0)return 0;const t=_/p*100;return Math.round(t)},U=O(),j=_=>{U.push({name:"ver-residente",params:{id:_}})},A="http://127.0.0.1:8000/api",E=()=>{const _=A+"/residentes-export-pdf-carrera/"+o.value;window.open(_,"_blank")};return(_,p)=>(l(),x("div",null,[a(P,null,{default:r(()=>[a(g,null,{default:r(()=>[ce]),_:1}),a(g,null,{default:r(()=>[e("div",de,[a(ee,{style:{width:"300px"},modelValue:c.value,"onUpdate:modelValue":p[0]||(p[0]=t=>c.value=t),options:i(f),label:"Selecciona un periodo","option-value":"id","option-label":"nombre",loading:i(h),"emit-value":"","map-options":""},null,8,["modelValue","options","loading"])]),i(w)?(l(),u(N,{key:0})):z("",!0),i(y)&&i(y).length>0?(l(),x("div",ue,[e("div",_e,[e("div",null,[a(ne,{carrera_id:o.value,periodo_id:c.value},null,8,["carrera_id","periodo_id"]),a(ie,{carrera_id:o.value,periodo_id:c.value},null,8,["carrera_id","periodo_id"]),a(Q,{round:"",icon:"picture_as_pdf",color:"negative",size:"sm",onClick:E})])]),a(ae,null,{default:r(()=>[pe,e("tbody",null,[(l(!0),x(V,null,H(i(y),t=>(l(),x("tr",{key:t.estudiante_id},[e("td",null,[e("div",me,[e("div",null,[t.url_foto?(l(),u(q,{key:0},{default:r(()=>[a(S,{src:t.url_foto},null,8,["src"])]),_:2},1024)):(l(),u(q,{key:1,color:"primary","text-color":"white"},{default:r(()=>[d(s(t.iniciales_nombre_apellido),1)]),_:2},1024))]),e("div",null,[e("div",null,s(t.nombre_completo),1),e("div",null,[a(k,{dense:"",style:J({backgroundColor:t.color_carrera}),"text-color":"white"},{default:r(()=>[d(s(t.nombre_carrera),1)]),_:2},1032,["style"]),a(k,{dense:"",color:"secondary","text-color":"white",icon:"call"},{default:r(()=>[d(s(t.telefono_estudiante),1)]),_:2},1024)])])])]),e("td",fe,[e("div",ve,[d(s(t.nombre_empresa)+" ",1),a(k,{dense:"",color:"secondary","text-color":"white",icon:"call"},{default:r(()=>[d(s(t.telefono_empresa),1)]),_:2},1024)])]),e("td",he,[e("div",ye,[d(s(t.proyecto)+" ",1),e("div",null,[a(k,{dense:"",color:"deep-purple","text-color":"white",icon:"checklist"},{default:r(()=>[d(s(t.tipo_proyecto),1)]),_:2},1024),t.nombre_asesor?(l(),u(k,{key:0,dense:"",color:"light-blue-10","text-color":"white",icon:"supervisor_account"},{default:r(()=>[d(s(t.nombre_asesor),1)]),_:2},1024)):(l(),u(k,{key:1,dense:"",color:"orange","text-color":"white",icon:"block"},{default:r(()=>[d(" No hay asesor asignado ")]),_:1}))])])]),e("td",null,[a(te,{push:""},{default:r(()=>[a(Q,{size:"sm",color:"info",push:"",glossy:"",icon:"visibility",onClick:Ee=>j(t.estudiante_id)},null,8,["onClick"])]),_:2},1024),a(oe,{"show-value":"","font-size":"12px",value:Y(t.documentos_entregados,t.total_documentos),size:"50px",thickness:.22,color:"primary","track-color":"grey-3",class:"q-ma-md"},{default:r(()=>[d(s(Y(t.documentos_entregados,t.total_documentos))+"% ",1)]),_:2},1032,["value"])])]))),128))])]),_:1}),e("div",xe,[e("div",ge,s(i(y).length)+" residentes ",1)])])):i(y)&&i(y).length===0?(l(),x("div",be,Ce)):z("",!0)]),_:1})]),_:1})]))}});var we=L($e,[["__scopeId","data-v-0a6f1c25"]]);const b=n=>(I("data-v-495f2418"),n=n(),M(),n),Qe={class:"row"},Re={class:"col-xs-12 col-md-6"},ze={class:"fontsize-14 text-center text-weight-light flex items-center"},De={class:"flex justify-star items-center"},Ye=b(()=>e("td",null,"Clave de la carrera:",-1)),qe=b(()=>e("td",null,"Fecha de registro en la BD:",-1)),Be=b(()=>e("td",null,"\xDAltima actualizaci\xF3n en la BD:",-1)),Le={class:"col-xs-12 col-md-6"},Ve={class:"fontsize-14 text-center text-weight-light flex items-center"},Ie=b(()=>e("td",null,"Nombre del departamento:",-1)),Me=b(()=>e("td",null,"Nombre del titular:",-1)),Ne=b(()=>e("td",null,"Apellidos titular:",-1)),Pe=b(()=>e("td",null,"Fecha de registro:",-1)),Se={class:"row q-mt-md"},Fe={class:"col-12"},Ue=$({__name:"CardCarrera",props:{carrera:{}},setup(n){const o=C(n,"carrera");return(c,f)=>(l(),x(V,null,[a(P,null,{default:r(()=>[e("div",Qe,[e("div",Re,[a(g,null,{default:r(()=>[e("div",ze,[a(B,{name:"local_library",class:"q-mr-xs"}),d(" "+s(o.value.nombre),1)])]),_:1}),a(g,null,{default:r(()=>[e("div",De,[o.value.escudo?(l(),u(S,{key:0,src:o.value.escudo,width:"150px"},null,8,["src"])):z("",!0),e("table",null,[e("tr",null,[Ye,e("td",null,s(o.value.clave),1)]),e("tr",null,[qe,e("td",null,s(i(R).formatDate(o.value.created_at,"d/MM/YYYY")),1)]),e("tr",null,[Be,e("td",null,s(i(R).formatDate(o.value.updated_at,"d/MM/YYYY")),1)])])])]),_:1})]),e("div",Le,[a(g,null,{default:r(()=>[e("div",Ve,[a(B,{name:"account_balance",class:"q-mr-xs"}),d(" Departamento ")])]),_:1}),o.value.departamento?(l(),u(g,{key:0},{default:r(()=>[e("table",null,[e("tr",null,[Ie,e("td",null,s(o.value.departamento.nombre),1)]),e("tr",null,[Me,e("td",null,s(o.value.departamento.nombre_titular),1)]),e("tr",null,[Ne,e("td",null,s(o.value.departamento.apellidos_titular),1)]),e("tr",null,[Pe,e("td",null,s(i(R).formatDate(o.value.departamento.created_at,"d/MM/YYYY")),1)])])]),_:1})):(l(),u(g,{key:1},{default:r(()=>[d(" No hay departamento asignado ")]),_:1}))])])]),_:1}),e("div",Se,[e("div",Fe,[a(we,{id:o.value.id},null,8,["id"])])])],64))}});var je=L(Ue,[["__scopeId","data-v-495f2418"]]);const Ae={key:2},Qt=$({__name:"VerCarrera",setup(n){const m=[{label:"Carreras",icon:"local_library",to:"listar-carrera"},{label:"Ver carrera",icon:"visibility"}],o=W(),{id:c=""}=o.params,{resource:f,isLoading:h,error:v}=Z(c+"");return(w,y)=>(l(),u(T,{padding:""},{default:r(()=>[a(X,{pages:m,titlePage:"Ver carrera"}),i(h)?(l(),u(N,{key:0})):i(f)?(l(),u(je,{key:1,carrera:i(f)},null,8,["carrera"])):(l(),x("div",Ae,s(i(v)),1))]),_:1}))}});export{Qt as default};
